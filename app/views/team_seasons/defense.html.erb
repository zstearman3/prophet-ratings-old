<% provide(:title, 'Team Defense Stats') %>
<% year = params[:season].to_i %>
<%= link_to 'Previous Season', team_defense_path(season: year - 1) %>
<%= link_to 'Next Season', team_defense_path(season: year + 1), class: 'align-right' %>
<table class="table table-sm">
  <thead>
    <tr>
      <th>Rank</th>
      <th>Team</th>
      <th>Record</th>
      <th>AdjD</th>
      <th>Steals%</th>
      <th>Blocks%</th>
      <th>OppTS%</th>
      <th>DStyle</th>
      <th>DScheme</th>
    </tr>
  </thead>
  <tbody>
    <% x = 1 %>
    <% @team_seasons.each do |season| %>
      <tr>
        <td><%= x %></td>
        <td><%= link_to season.team.school, season.team %></td>
        <td><%= season.wins.to_s + "-" + season.losses.to_s %></td>
        <td><%= season.adj_defensive_efficiency %></td>
        <td><%= season.steals_percentage %></td>
        <td><%= season.blocks_percentage %></td>
        <td><%= season.true_shooting_percentage_allowed %></td>
        <td><%= season.defensive_fingerprint.round(1) %></td>
        <% style = "unknown" %>
        <% if season.defensive_fingerprint < -40 %>
          <% style = "Aggressive Man" %>
        <% elsif season.defensive_fingerprint < -20 %>
          <% style = "Mostly Man" %>
        <% elsif season.defensive_fingerprint < 20 %>
          <% style = "Balanced" %>
        <% elsif season.defensive_fingerprint < 40 %>
          <% style = "Some Zone" %>
        <% else %>
          <% style = "Mostly Zone" %>
        <% end %>
        <td><%= style %></td>
      </tr>
      <% if x % 20 == 0 %>
        <tr>
          <th>Rank</th>
          <th>Team</th>
          <th>Record</th>
          <th>AdjD</th>
          <th>Steals%</th>
          <th>Blocks%</th>
          <th>OppTS%</th>
          <th>DStyle</th>
          <th>DScheme</th>
        </tr>
      <% end %>
      <% x += 1 %>
    <% end %>
  </tbody>
</table>
