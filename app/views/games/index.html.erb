<% provide(:title, 'Games') %>

<h1>Games</h1>

<% previous_day = (Date.parse(params[:date]) - 1.day).strftime('%Y%m%d') %>
<% next_day = (Date.parse(params[:date]) + 1.day).strftime('%Y%m%d') %>
<%= link_to "Previous Day", games_path(date: previous_day) %>
<%= link_to "Next Day", games_path(date: next_day), class: 'align-right' %>
<table class="table table-sm">
  <thead>
    <tr>
      <th>Matchup</th>
      <th>Time</th>
      <th>Point Spread</th>
      <th>Prophet Line</th>
      <th>Over/Under</th>
      <th>Prophet O/U</th>
      <th>Away Score</th>
      <th>Home Score</th>
      <th>Possessions</th>
      <th>Away OEff</th>
      <th>Home OEff</th>
      <th>Pace</th>
    </tr>
  </thead>
  <tbody>
    <% @games.each do |game| %>
      <tr>
        <td>
        <!--Away Team Link-->
        <% if game.away_team %>
          <%= link_to game.away_team_name, game.away_team %>
        <% else %>
          <%= game.away_team_name %>
        <% end %>
         @ 
        <!--Home Team Link-->
        <% if game.home_team %>
          <%= link_to game.home_team_name, game.home_team %>
        <% else %>
          <%= game.home_team_name %>
        <% end %>  
        </td>
        <td><%= link_to game.date_time.strftime("%I:%M%p"), game unless game.date_time.nil? %></td>
        <td><%= game.point_spread %></td>
        <td><%= game.prediction.predicted_point_spread if game.prediction %></td>
        <td><%= game.over_under %></td>
        <td><%= game.prediction.predicted_over_under if game.prediction %></td>
        <td><%= game.away_team_score %></td>
        <td><%= game.home_team_score %></td>
        <td><%= game.possessions %></td>
        <td><%= game.away_offensive_efficiency %></td>
        <td><%= game.home_offensive_efficiency %></td>
        <td><%= game.pace %></td>
      </tr>
    <% end %>
  </tbody>
</table>